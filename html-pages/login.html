<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - ACHE</title>
    <link rel="stylesheet" href="/style/style-login.css" />
  </head>
  <body>
    <div class="login-box">
      <h1 class="logo">ACHE</h1>
      <p class="subtitulo">Acesse sua conta</p>

      <form id="form-login">
        <label for="email">E-mail</label>
        <input type="email" id="email" name="email" required />

        <label for="senha">Senha</label>
        <input type="password" id="senha" name="senha" required />

        <button type="submit">Entrar</button>

        <div class="forgot-password">
          <a href="cadastro.html">Não se cadastrou?</a>
        </div>
      </form>
    </div>

    <script>
      const form = document.getElementById("form-login");

      form.addEventListener("submit", function (e) {
        e.preventDefault();

        const email = document.getElementById("email").value;
        const senha = document.getElementById("senha").value;

        const usuarios = JSON.parse(localStorage.getItem("usuarios") || "[]");
        const usuarioValido = usuarios.find(
          (u) => u.email === email && u.senha === senha
        );

        if (usuarioValido) {
          // Salva flag de login
          localStorage.setItem("logado", "true");
          // Salva todo o objeto do usuário
          localStorage.setItem("usuarioLogado", JSON.stringify(usuarioValido));
          // Salva nome completo separadamente (se quiser)
          localStorage.setItem("nomeCompleto", usuarioValido.nome);

          window.location.href = "index.html";
        } else {
          alert("E-mail ou senha inválidos.");
        }
      });
    </script>
  </body>
</html>
